{"version":3,"file":"bundle.js","mappings":"iEAKA,WAUC,WAAYA,EAAcC,EAA0BC,EAAUC,EAAwBC,GACrFC,KAAKL,IAAMA,EACXK,KAAKJ,MAAQA,EACbI,KAAKH,IAAMA,EACXG,KAAKF,WAAaA,EAClBE,KAAKD,OAASA,EACdC,KAAKC,WAAa,CAAC,6BACnBD,KAAKE,OAAS,CAAC,EACfF,KAAKG,kBAAoB,EAC1B,CAqED,OAnEc,YAAAC,MAAb,W,6pCAiB6B,OAhBtBC,EAAgB,WACrB,IAAMC,EAAW,EAAKL,WAAWM,KAAI,SAACC,GACrC,OAAO,IAAIC,SAAQ,SAACC,EAASC,G,MACtBC,EAA4B,QAArB,EAAAJ,EAAKK,MAAM,KAAKC,aAAK,eAAED,MAAM,KAAK,GACzCE,EAAQ,IAAIC,MAElBD,EAAME,IAAMT,EACZO,EAAMG,OAAS,WACdR,EAAQ,CAACE,EAAMG,GAChB,EACAA,EAAMI,QAAU,WAAM,OAAAR,EAAO,gCAAyBH,GAAhC,CACvB,GACD,IACA,OAAOC,QAAQW,IAAId,EACpB,EAE4B,GAAMD,K,cAA5BgB,EAAsB,SAC5BrB,KAAKE,OAASoB,OAAOC,YAAYF,G,ySAG1B,YAAAG,gBAAR,SAAwBC,GAEjB,gBADEA,GAENzB,KAAKH,IAAI6B,eAAe,GAG3B,EAEO,YAAAC,KAAP,SAAYC,EAAsBC,EAAkBC,EAAeC,EAAiBC,GACnF,IAAK,IAAIC,EAAI,EAAGA,GAAIL,aAAQ,EAARA,EAAUM,QAAQD,IAAK,CAC1C,IAAME,EAA2BnC,KAAKE,OAAO0B,EAASK,GAAGrB,MAEzD,GAAKuB,EAAL,CAEA,IAAMC,EAAON,EAAQC,EAAUH,EAASK,GAAGI,eACrCC,EAAOT,EAAWM,EAAOI,OAAS,GAAKX,EAASK,GAAGO,cACnDC,EAAS,UAAGb,EAASK,GAAGrB,KAAI,YAAIoB,EAAS,YAAIJ,EAASK,GAAGI,gBAE3DrC,KAAKG,kBAAkBuC,SAASD,GAC/BL,EAAOD,EAAOQ,MAAQ,GAAG3C,KAAKG,kBAAkByC,SAIrD5C,KAAKL,IAAIkD,UAAUV,EAAQC,EAAME,EAAMH,EAAOQ,MAAOR,EAAOI,QAEhCvC,KAAKF,WAAWgD,iBAAiB,CAC5DC,GAAI/C,KAAKD,OAAOiD,EAChBC,GAAIjD,KAAKD,OAAOmD,EAChBC,GAAIf,EACJgB,GAAId,EACJe,GAAIrD,KAAKD,OAAOuD,EAChBC,GAAIvD,KAAKD,OAAOyD,EAChBC,GAAIzD,KAAKE,OAAO0B,EAASK,GAAGrB,MAAM+B,MAClCe,GACC1D,KAAKE,OAAO0B,EAASK,GAAGrB,MAAM2B,QAC9BvC,KAAKJ,MAAM2C,QAAUV,EAAW7B,KAAKE,OAAO0B,EAASK,GAAGrB,MAAM2B,OAAS,IACxEoB,OAAQ,EACRlB,OAAQA,MAIRzC,KAAKG,kBAAkByD,KAAKnB,GAC5BzC,KAAKwB,gBAAgBI,EAASK,GAAGrB,OA9Bb,C,CAiCvB,EACD,EAxFA,E,wCCDA,WAMC,WAAYjB,EAAcC,EAA0BG,EAAgBF,GACnEG,KAAKL,IAAMA,EACXK,KAAKJ,MAAQA,EACbI,KAAKD,OAASA,EACdC,KAAKH,IAAMA,CACZ,CAkDD,OAhDQ,YAAAgE,sBAAP,SAA6B,G,IAAEd,EAAE,KAAEE,EAAE,KAAEE,EAAE,KAAEC,EAAE,KAAEC,EAAE,KAAEE,EAAE,KAAEE,EAAE,KAAEC,EAAE,KAAEC,EAAM,SAC9DG,GADsE,SAC9Cf,EAAKM,GAAMF,EAAKQ,GACxCI,EAAwBhB,GAAMI,EAAKM,EACnCO,EAAqBf,GAAMG,EAAKM,EAChCO,EAAqBhB,EAAKjD,KAAKD,OAAOyD,EAAIJ,GAAMpD,KAAKD,OAAOmE,QAAUP,EAAS,GAErF,GAAIG,GAAyBC,GAAyBC,EAAoB,CAEzE,GAAIhE,KAAKD,OAAOoE,WAAa,GAAKC,KAAKC,IAAIjB,GAAMH,EAAKM,IAAO,GAE5D,OADAvD,KAAKD,OAAOuE,KAAKlB,IACV,EACD,GAAIa,EAGV,OAFAM,QAAQC,IAAI,uBACZxE,KAAKH,IAAI4E,OAAS,GACX,C,CAGT,OAAIzE,KAAKD,OAAOmD,EAAIlD,KAAKD,OAAOyD,EAAIxD,KAAKJ,MAAM2C,SAC9CvC,KAAKH,IAAI4E,OAAS,EAClBF,QAAQC,IAAI,6BACL,EAGT,EAEO,YAAAE,kBAAP,SAAyB,G,IAAE3B,EAAE,KAAEE,EAAE,KAAEE,EAAE,KAAEC,EAAE,KAAEC,EAAE,KAAEE,EAAE,KAAEE,EAAE,KAAEC,EAAE,KAAEC,EAAM,SAAElB,EAAM,SAEvEM,EAAKM,GAAMF,EAAKQ,GAChBZ,GAAMI,EAAKM,GACXR,GAAMG,EAAKM,GACXT,EAAKM,EAAKH,IAEVpD,KAAKH,IAAI8E,aAAalC,EAAQ,IAC9BzC,KAAKD,OAAO6E,oBAAoBnC,GAElC,EAEO,YAAAK,iBAAP,SAAwB,G,IAAEC,EAAE,KAAEE,EAAE,KAAEE,EAAE,KAAEC,EAAE,KAAEC,EAAE,KAAEE,EAAE,KAAEE,EAAE,KAAEC,EAAE,KAAEC,EAAM,SAC/D,OADuE,SAEtEZ,EAAKM,GAAMF,EAAKQ,GAChBZ,GAAMI,EAAKM,GACXR,GAAMG,EAAKM,GACXT,EAAKM,EAAKH,CAKZ,EACD,EA7DA,E,yCCDA,WAYC,WAAYzD,EAAcC,GACzBI,KAAKL,IAAMA,EACXK,KAAKJ,MAAQA,EACbI,KAAKyE,OAAS,IACdzE,KAAK6E,cAAgB,GACrB7E,KAAK8E,kBAAmB,EACxB9E,KAAK+E,iBAAmB,EACxB/E,KAAKgF,oBAAsB,IAC3BhF,KAAKiF,aAAe,EACpBjF,KAAKkF,IAAM,EACXlF,KAAKmF,YAAa,CACnB,CA6GD,OA3GS,YAAAC,QAAR,WACMpF,KAAKmF,aAEVnF,KAAKL,IAAI0F,KAAO,aAChBrF,KAAKL,IAAI2F,UAAY,qBACrBtF,KAAKL,IAAI4F,UAAY,QACrBvF,KAAKL,IAAI6F,SAAS,UAAGxF,KAAKkF,IAAG,QAAQlF,KAAKJ,MAAM+C,MAAQ,GAAI,IAC7D,EAEO,YAAA8C,eAAP,SAAsBC,EAAwB1C,EAAWE,GAKxDlD,KAAKL,IAAIgG,YAAc,eACvB3F,KAAKL,IAAI2F,UAAY,iBACrBtF,KAAKL,IAAIiG,YACT5F,KAAKL,IAAIkG,KAAK7C,EALE,EAKY,EAAGE,GAJf,GAI6B,EAAGI,GAAOE,IACvDxD,KAAKL,IAAImG,SACT9F,KAAKL,IAAIoG,SAAS/C,EAPF,EAOeE,GANf,GAFN,GADA,GACA,GAQ8CwC,EACzD,EAEO,YAAAf,aAAP,SAAoBlC,EAAgBuD,GAC/BhG,KAAK6E,gBAAkBpC,IACvBzC,KAAKyE,OAASuB,GAAO,EAAGhG,KAAKyE,OAAS,EACrCzE,KAAKyE,QAAUuB,EAEpBhG,KAAK6E,cAAgBpC,EACtB,EAEO,YAAAf,eAAP,SAAsBsE,GACjBhG,KAAKyE,OAASuB,GAAO,IAAKhG,KAAKyE,OAAS,IACvCzE,KAAKyE,QAAUuB,CACrB,EAEQ,YAAAC,WAAR,WAMCjG,KAAKL,IAAIuG,cAAgB,EACzBlG,KAAKL,IAAIwG,cAAgB,EACzBnG,KAAKL,IAAIyG,YAAc,qBACvBpG,KAAKL,IAAI0G,WAAa,EAEtBrG,KAAKL,IAAI2G,UAAY,EACrBtG,KAAKL,IAAIgG,YAAc,mBACvB3F,KAAKL,IAAIiG,YACT5F,KAAKL,IAAI4G,UAAUC,GAAmBC,GAAmBC,IAAcC,GAAc,IACrF3G,KAAKL,IAAImG,SAET9F,KAAKL,IAAI2F,UACRtF,KAAKyE,QAAU,GACZ,qBACAzE,KAAKyE,QAAU,IAAMzE,KAAKyE,OAAS,GACnC,uBACA,qBACJzE,KAAKL,IAAIiG,YACT5F,KAAKL,IAAI4G,UAvBa,GACA,GAsBuCvG,KAAKyE,OAAS,IArB1D,IACA,GAoB0E,IAC3FzE,KAAKL,IAAIiH,OAET5G,KAAKL,IAAIuG,cAAgB,EACzBlG,KAAKL,IAAIwG,cAAgB,EACzBnG,KAAKL,IAAI0G,WAAa,CACvB,EAEQ,YAAAQ,kBAAR,WAKC7G,KAAKL,IAAI2F,UAAY,wBAAiBtF,KAAK+E,kBAAoB,GAAM,GAAM/E,KAAK+E,iBAAgB,KAChG/E,KAAKL,IAAIiG,YACT5F,KAAKL,IAAI4G,UAAUvG,KAAKJ,MAAM+C,MAAQ,EAAIW,IAAOtD,KAAKJ,MAAM2C,OAAS,EAAIiB,GAJzD,IAFN,IACA,GAKsF,IAChGxD,KAAKL,IAAIiH,OAET5G,KAAKL,IAAI0F,KAAO,aAChBrF,KAAKL,IAAI2F,UAAY,8BAAuBtF,KAAK+E,iBAAgB,KACjE/E,KAAKL,IAAI4F,UAAY,SACrBvF,KAAKL,IAAImH,aAAe,SACxB9G,KAAKL,IAAI6F,SACR,gBAASxF,KAAKiF,aAAe,GAC7BjF,KAAKJ,MAAM+C,MAAQ,EACnB3C,KAAKJ,MAAM2C,OAAS,EAdL,KAiBhBvC,KAAK+E,kBAAoB/E,KAAKgF,mBAC/B,EAEO,YAAA+B,wBAAP,sBACC/G,KAAK8E,kBAAmB,EACxBkC,YAAW,WACV,EAAKhC,sBAAwB,EAC7BgC,YAAW,WACV,EAAKlC,kBAAmB,EACxB,EAAKE,sBAAwB,CAC9B,GAAG,KACJ,GAAG,KACJ,EAEO,YAAArD,KAAP,WACC3B,KAAKiG,aACLjG,KAAKoF,UAEDpF,KAAK8E,kBAAkB9E,KAAK6G,mBACjC,EACD,EApIA,E,eCkGA,QAJgC,CAC/BI,OAAQ,CAhGgB,CACxBC,UAAW,CACV,CACChE,EAAG,IACHiE,IAAK,IACLC,UAAW,EACXC,MAAO,CAAC,CAAEzG,KAAM,YAAa0G,kBAAmB,CAAC,OAElD,CACCpE,EAAG,IACHiE,IAAK,IACLC,UAAW,KAEZ,CACClE,EAAG,IACHiE,IAAK,IACLC,UAAW,GAEZ,CAAElE,EAAG,IAAKiE,IAAK,IAAKC,UAAW,GAC/B,CAAElE,EAAG,IAAKiE,IAAK,IAAMC,UAAW,EAAGG,UAAW,CAAC,CAAE3G,KAAM,QAAS0G,kBAAmB,CAAC,OACpF,CAAEpE,EAAG,IAAKiE,IAAK,KAAMC,UAAW,GAChC,CAAElE,EAAG,IAAKiE,IAAK,IAAMC,UAAW,EAAGG,UAAW,CAAC,CAAE3G,KAAM,QAAS0G,kBAAmB,CAAC,OACpF,CAAEpE,EAAG,IAAKiE,IAAK,IAAMC,UAAW,GAChC,CAAElE,EAAG,IAAKiE,IAAK,IAAKC,UAAW,GAC/B,CAAElE,EAAG,IAAKiE,IAAK,IAAKC,UAAW,IAC/B,CAAElE,EAAG,IAAKiE,IAAK,IAAMC,UAAW,EAAGG,UAAW,CAAC,CAAE3G,KAAM,QAAS0G,kBAAmB,CAAC,OACpF,CAAEpE,EAAG,IAAKiE,IAAK,IAAMC,UAAW,KAChC,CAAElE,EAAG,IAAKiE,IAAK,IAAMC,UAAW,EAAGG,UAAW,CAAC,CAAE3G,KAAM,QAAS0G,kBAAmB,CAAC,OACpF,CAAEpE,EAAG,IAAKiE,IAAK,IAAKC,UAAW,GAC/B,CAAElE,EAAG,IAAKiE,IAAK,KAAMC,UAAW,KAChC,CAAElE,EAAG,IAAKiE,IAAK,IAAMC,UAAW,EAAGG,UAAW,CAAC,CAAE3G,KAAM,QAAS0G,kBAAmB,CAAC,OACpF,CACCpE,EAAG,IACHiE,IAAK,IACLC,UAAW,EACXxF,SAAU,CAAC,CAAEhB,KAAM,cAAeyB,eAAgB,GAAKG,cAAe,OAEvE,CACCU,EAAG,IACHiE,IAAK,IACLC,UAAW,IAGbI,gBAAiB,WACjBC,UAAW,KACXC,cAAe,WACfC,aAAc,EACdC,WAAY,IACZC,MAAO,IAGiB,CACxBX,UAAW,CACV,CACChE,EAAG,IACHiE,IAAK,IACLC,UAAW,GAEZ,CACClE,EAAG,IACHiE,IAAK,IACLC,UAAW,KAEZ,CAAElE,EAAG,IAAKiE,IAAK,IAAMC,UAAW,EAAGG,UAAW,CAAC,CAAE3G,KAAM,QAAS0G,kBAAmB,CAAC,OACpF,CAAEpE,EAAG,IAAKiE,IAAK,IAAKC,UAAW,GAC/B,CAAElE,EAAG,IAAKiE,IAAK,IAAMC,UAAW,EAAGG,UAAW,CAAC,CAAE3G,KAAM,QAAS0G,kBAAmB,CAAC,OACpF,CAAEpE,EAAG,IAAKiE,IAAK,KAAMC,UAAW,GAChC,CAAElE,EAAG,IAAKiE,IAAK,IAAMC,UAAW,EAAGG,UAAW,CAAC,CAAE3G,KAAM,QAAS0G,kBAAmB,CAAC,OACpF,CAAEpE,EAAG,IAAKiE,IAAK,IAAMC,UAAW,GAChC,CAAElE,EAAG,IAAKiE,IAAK,IAAKC,UAAW,GAC/B,CACClE,EAAG,IACHiE,IAAK,IACLC,UAAW,GACXxF,SAAU,CAAC,CAAEhB,KAAM,cAAeyB,eAAgB,GAAKG,cAAe,OAEvE,CAAEU,EAAG,IAAKiE,IAAK,IAAMC,UAAW,GAChC,CAAElE,EAAG,IAAKiE,IAAK,IAAKC,UAAW,EAAGG,UAAW,CAAC,CAAE3G,KAAM,QAAS0G,kBAAmB,CAAC,OACnF,CAAEpE,EAAG,IAAKiE,IAAK,IAAMC,UAAW,KAChC,CAAElE,EAAG,IAAKiE,IAAK,IAAMC,UAAW,EAAGG,UAAW,CAAC,CAAE3G,KAAM,QAAS0G,kBAAmB,CAAC,OACpF,CAAEpE,EAAG,IAAKiE,IAAK,IAAKC,UAAW,GAC/B,CAAElE,EAAG,IAAKiE,IAAK,KAAMC,UAAW,EAAGG,UAAW,CAAC,CAAE3G,KAAM,QAAS0G,kBAAmB,CAAC,OACpF,CAAEpE,EAAG,IAAKiE,IAAK,KAAMC,UAAW,KAChC,CAAElE,EAAG,IAAKiE,IAAK,IAAMC,UAAW,EAAGG,UAAW,CAAC,CAAE3G,KAAM,QAAS0G,kBAAmB,CAAC,OACpF,CAAEpE,EAAG,IAAKiE,IAAK,IAAMC,UAAW,GAChC,CAAElE,EAAG,IAAKiE,IAAK,IAAKC,UAAW,IAEhCI,gBAAiB,WACjBC,UAAW,GACXC,cAAe,WACfC,aAAc,IACdC,WAAY,IACZC,MAAO,M,ICjFJC,EAA0BC,EAAaC,EAAcC,EAAiBC,EAQtE,EAAsB,EAAgB,EAAU,EAAwB,E,4CAdtEtI,EAA2BuI,SAASC,eAAe,SACnDzI,EAAgCC,EAAMyI,WAAW,KAAM,CAAEC,OAAO,IAEhEC,EAA2BJ,SAASK,cAAc,aAMpD,EAAS,EACTC,GAAS,EAePC,EAAW,WAChBZ,EAAYa,sBAAsBD,GAElCR,EAAc,IApBC,GAqBfH,EAAMa,KAAKb,OACXE,EAAUF,GAAOC,GAAQ,IAEXE,IACE,IAAX,GACHlB,YAAW,WACV,EAAI9B,IAAM,EACV,EAAS,CACV,GAAG,KACJ,GAAU,EACV8C,EAAOD,EAAOE,EAAUC,EAExBvI,EAAIkJ,UAAU,EAAG,EAAGjJ,EAAM+C,MAAO/C,EAAM2C,QAClCkG,EAIJ,EAAOZ,MAAQ,GAHf,EAAUiB,OACV,EAAOjB,MAAQ,EAAWZ,OAAO,EAAUhC,cAAc4C,OAI1D,EAAUlG,OACV,EAAOA,OACP,EAAIA,OAMe,IAAf,EAAI8C,SAvCLqD,GAAWiB,qBAAqBjB,GACpCA,EAAY,KACZkB,IACAT,EAASU,MAAMC,QAAU,QACzBX,EAASY,UAAY,cAqCtB,EAMMH,EAAW,kB,OAAA,E,OAAA,E,EAAA,W,0mCAShB,OARA1H,OAAO8H,OAAO,GAEd,EAAM,IAAI,IAAIzJ,EAAKC,GACnB,EAAS,IAAI,IAAOD,EAAKC,EAAO,GAChC,EAAa,IAAI,IAAWD,EAAKC,EAAO,EAAQ,GAChD,EAAY,IAAI,IAAUD,EAAKC,EAAO,EAAK,EAAY,GAGvD,IAFA,EAAY,IAAI,IAAUD,EAAKC,EAAO,EAAQ,EAAK,EAAY,EAAW,IAE1DQ,S,OAChB,OADA,SACA,GAAM,EAAOA,S,OACb,OADA,SACA,GAAM,EAAUA,S,cAAhB,SAGAmI,EAASU,MAAMC,QAAU,Q,qBAdT,K,+QAiBjBF,IAEAb,SAASkB,iBAAiB,WAAW,SAAAC,GAE9B,UADEA,EAAEC,MAEJzB,IACCW,EACHA,GAAS,EAEJ,EAAOe,cAAa,EAAOA,aAAc,GAKnD,IAEArB,SAASkB,iBAAiB,SAAS,SAAAC,GAClC,OAAQA,EAAEC,MACT,IAAK,SAEHd,GADGA,EAKL,IAAK,QACJ,EAAOgB,OAGV,IAEAlB,EAASmB,QAAU,WAlDlBhB,IAoDAH,EAASU,MAAMC,QAAU,MAC1B,C,yCCnHA,WAqBC,WACCvJ,EACAC,EACAG,EACAF,EACAC,EACA6J,EACAC,GAEA5J,KAAKL,IAAMA,EACXK,KAAKJ,MAAQA,EACbI,KAAKD,OAASA,EACdC,KAAKH,IAAMA,EACXG,KAAKF,WAAaA,EAClBE,KAAK2J,UAAYA,EACjB3J,KAAK4J,WAAaA,EAClB5J,KAAKiF,aAAe,EACpBjF,KAAK6J,aAAe,CACnB,CACCC,MAAO,EACP9G,EAAG,EACH+G,MAAO,IAGT/J,KAAKgK,YAAc,EACnBhK,KAAKiK,aAAejK,KAAKJ,MAAM+C,MAC/B3C,KAAK2H,aAAe,EACpB3H,KAAKkK,cAAgB,EACrBlK,KAAKmK,UAAW,EAChBnK,KAAKoK,gBAAkB,GACvBpK,KAAKC,WAAa,CACjB,yBACA,yBAEA,yBACA,yBAEA,0BAEA,sBACA,sBACA,uBAEDD,KAAKE,OAAS,CAAC,EACfF,KAAKqK,OAAS,GACdrK,KAAKsK,OAAS,EACf,CA2QD,OAzQc,YAAAlK,MAAb,W,6pCAiB6B,OAhBtBC,EAAgB,WACrB,IAAMC,EAAW,EAAKL,WAAWM,KAAI,SAACC,GACrC,OAAO,IAAIC,SAAQ,SAACC,EAASC,G,MACtBC,EAA4B,QAArB,EAAAJ,EAAKK,MAAM,KAAKC,aAAK,eAAED,MAAM,KAAK,GACzCE,EAAQ,IAAIC,MAElBD,EAAME,IAAMT,EACZO,EAAMG,OAAS,WACdR,EAAQ,CAACE,EAAMG,GAChB,EACAA,EAAMI,QAAU,WAAM,OAAAR,EAAO,gCAAyBH,GAAhC,CACvB,GACD,IACA,OAAOC,QAAQW,IAAId,EACpB,EAE4B,GAAMD,K,cAA5BgB,EAAsB,SAC5BrB,KAAKE,OAASoB,OAAOC,YAAYF,G,ySAG1B,YAAAkJ,aAAR,WACC,IAAMC,EAAgCxK,KAAK6J,aAAa7J,KAAK6J,aAAa3H,OAAS,GAC7EuI,EAAwBzK,KAAK4J,WAAW3C,OAAOjH,KAAKiF,cAAciC,UAClEwD,EAAyBD,EAASD,EAAgBV,OAGxD,GAAIU,EAAgBV,QAAUW,EAASvI,OAAS,EAW/C,OAVAlC,KAAKiF,cAAgB,EAErBjF,KAAK6J,aAAajG,KAAK,CACtBkG,MAAO,EACP9G,EAAGwH,EAAgBxH,EAAI0H,EAAYvD,IAAMuD,EAAYtD,UACrD2C,MAAO/J,KAAKiF,oBAGTjF,KAAK6J,aAAa,GAAG7G,EAAIyH,EAASzK,KAAK6J,aAAa,GAAGC,OAAO3C,IAAM,GAAGnH,KAAK6J,aAAajH,SAKhE,IAA1B4H,EAAgBV,QACnB9J,KAAKH,IAAIoF,aAAejF,KAAKiF,aAC7BjF,KAAKH,IAAIkH,2BAGV/G,KAAK6J,aAAajG,KAAK,CACtBkG,MAAOU,EAAgBV,MAAQ,EAC/B9G,EAAGwH,EAAgBxH,EAAI0H,EAAYvD,IAAMuD,EAAYtD,UACrD2C,MAAO/J,KAAKiF,eAGTjF,KAAK6J,aAAa,GAAG7G,EAAIyH,EAASzK,KAAK6J,aAAa,GAAGC,OAAO3C,IAAM,GAAGnH,KAAK6J,aAAajH,OAC9F,EAEO,YAAAkG,KAAP,WACC,IAAMiB,EAAgB/J,KAAK4J,WAAW3C,OAAOjH,KAAKiF,cAC5C0F,EAAqBZ,EAAM7C,UAAUlH,KAAK6J,aAAa7J,KAAK6J,aAAa3H,OAAS,GAAG4H,OAEzE9J,KAAK6J,aAAa7J,KAAK6J,aAAa3H,OAAS,GAAGc,EAElD2H,EAAQxD,KAAOnH,KAAKJ,MAAM+C,OAAO3C,KAAKuK,eAEtD,IAAK,IAAItI,EAAI,EAAGA,EAAIjC,KAAK6J,aAAa3H,OAAQD,IAAKjC,KAAK6J,aAAa5H,GAAGe,GAAK+G,EAAMlC,MACnF7H,KAAKgK,aAAeD,EAAMlC,MAAQ,EAC9B7H,KAAKsK,SAAQtK,KAAKiK,cAAgBF,EAAMlC,MAAQ,EACrD,EAEQ,YAAA+C,iBAAR,SAAyBvD,EAAsBxF,EAAkBC,EAAeC,GAC/E,IAAK,IAAIE,EAAI,EAAGA,GAAIoF,aAAK,EAALA,EAAOnF,QAAQD,IAIlC,IAHA,IAAME,EAA2BnC,KAAKE,OAAOmH,EAAMpF,GAAGrB,MAChDiK,EAAaxD,EAAMpF,GAAGqF,kBAEnB,EAAI,EAAG,GAAIuD,aAAU,EAAVA,EAAY3I,QAAQ,IACvClC,KAAKL,IAAIkD,UACRV,EACAL,EAAQC,EAAU8I,EAAW,GAC7BhJ,EAAW7B,KAAKE,OAAOmH,EAAM,GAAGzG,MAAM2B,OAAS,GAC/CvC,KAAKE,OAAOmH,EAAM,GAAGzG,MAAM+B,MAC3B3C,KAAKE,OAAOmH,EAAM,GAAGzG,MAAM2B,OAI/B,EAEQ,YAAAuI,mBAAR,SACCvD,EACA1F,EACAC,EACAC,EACAC,GAEA,IAAK,IAAIC,EAAI,EAAGA,GAAIsF,aAAS,EAATA,EAAWrF,QAAQD,IAItC,IAHA,IAAME,EAA2BnC,KAAKE,OAAOqH,EAAUtF,GAAGrB,MACpDmK,EAAgBxD,EAAUtF,GAAGqF,kBAE1B,EAAI,EAAG,GAAIyD,aAAa,EAAbA,EAAe7I,QAAQ,IAC1ClC,KAAKL,IAAIkD,UACRV,EACAL,EAAQC,EAAUgJ,EAAc,GAChClJ,EAAW7B,KAAKE,OAAOqH,EAAU,GAAG3G,MAAM2B,OAAS,GACnDvC,KAAKE,OAAOqH,EAAU,GAAG3G,MAAM+B,MAC/B3C,KAAKE,OAAOqH,EAAU,GAAG3G,MAAM2B,QAGhCvC,KAAKF,WAAW4E,kBAAkB,CACjC3B,GAAI/C,KAAKD,OAAOiD,EAChBC,GAAIjD,KAAKD,OAAOmD,EAChBC,GAAIrB,EAAQC,EAAUgJ,EAAc,GACpC3H,GAAIvB,EAAW7B,KAAKE,OAAOqH,EAAU,GAAG3G,MAAM2B,OAAS,GACvDc,GAAIrD,KAAKD,OAAOuD,EAChBC,GAAIvD,KAAKD,OAAOyD,EAChBC,GAAIzD,KAAKE,OAAOqH,EAAU,GAAG3G,MAAM+B,MACnCe,GACC1D,KAAKE,OAAOqH,EAAU,GAAG3G,MAAM2B,QAC/BvC,KAAKJ,MAAM2C,QAAUV,EAAW7B,KAAKE,OAAOqH,EAAU,GAAG3G,MAAM2B,OAAS,IACzEoB,OAAQ3D,KAAKoK,gBACb3H,OAAQ,UAAG8E,EAAU,GAAG3G,KAAI,YAAIoB,EAAS,YAAI+I,EAAc,KAI/D,EAEQ,YAAAC,YAAR,W,MACMhL,KAAKqK,OAAOnI,SAChBlC,KAAK2H,aAAe3H,KAAK4J,WAAW3C,OAAOjH,KAAKiF,cAAc0C,aAC9D3H,KAAKqK,OAASrK,KAAK4J,WAAW3C,OAAOjH,KAAKiF,cAAcyC,eAGrD1H,KAAKsK,OAAOpI,QAAUlC,KAAKiK,cAAgB,IAC9CjK,KAAKqK,OAASrK,KAAK4J,WAAW3C,OAAOjH,KAAKiF,cAAcyC,cACxD1H,KAAKsK,OAAS,GACdtK,KAAKgK,YAAchK,KAAKiK,aACxBjK,KAAKiK,aAAejK,KAAKJ,MAAM+C,MAC/B3C,KAAK2H,aAAe3H,KAAKkK,cACzBlK,KAAKkK,cAAgB,GAGtB,IAAMe,EAAWjL,KAAKE,OAAOF,KAAKqK,SAGhCrK,KAAKgK,YAAciB,EAAStI,MAAQ3C,KAAKJ,MAAM+C,OAC/C3C,KAAK6J,aAAa,GAAGE,QAAU/J,KAAKiF,gBACpCjF,KAAKsK,OAAOpI,SAEblC,KAAKiK,aAAejK,KAAKJ,MAAM+C,MAC/B3C,KAAKkK,cAAgBlK,KAAK4J,WAAW3C,OAAOjH,KAAKiF,cAAc0C,aAC/D3H,KAAKsK,OAAStK,KAAK4J,WAAW3C,OAAOjH,KAAKiF,cAAcyC,eAGzD,IAAMwD,EAAsB,QAAX,EAAAlL,KAAKE,cAAM,eAAGF,KAAKsK,QAEpCtK,KAAKL,IAAIkD,UACRoI,EACA,EACA,EACAA,EAAStI,MACTsI,EAAS1I,OACTvC,KAAKgK,YACLhK,KAAKJ,MAAM2C,OAAS0I,EAAS1I,OAASvC,KAAK2H,aAC3CsD,EAAStI,MACTsI,EAAS1I,QAGN2I,GACHlL,KAAKL,IAAIkD,UACRqI,EACA,EACA,EACAA,EAASvI,MACTuI,EAAS3I,OACTvC,KAAKiK,aACLjK,KAAKJ,MAAM2C,OAAS2I,EAAS3I,OAASvC,KAAKkK,cAC3CgB,EAASvI,MACTuI,EAAS3I,OAGZ,EAEO,YAAAZ,KAAP,WACC3B,KAAKgL,cAGL,IADA,IAAIG,GAAY,EACG,MAAAnL,KAAK6J,aAAL,eAAmB,CAAjC,IAAMuB,EAAI,KACRrB,EAAgB/J,KAAK4J,WAAW3C,OAAOmE,EAAKrB,OAC5CsB,EACLrL,KAAKE,OAAO6J,EAAMvC,iBAAiB7E,OAASoH,EAAM7C,UAAUkE,EAAKtB,OAAO3C,IAAM4C,EAAMnC,YAE/E0D,EAAsBtL,KAAK4J,WAAW3C,OAAOmE,EAAKrB,OAAO7C,UAAUkE,EAAKtB,QAAU,IAEpFwB,aAAQ,EAARA,EAAUjE,QACbrH,KAAK4K,iBACJU,EAASjE,MACT0C,EAAM7C,UAAUkE,EAAKtB,OAAO5G,EAC5BkI,EAAKpI,EACL+G,EAAM7C,UAAUkE,EAAKtB,OAAO3C,MAG1BmE,aAAQ,EAARA,EAAU/D,YACbvH,KAAK8K,mBAAmBQ,EAAS/D,UAAW+D,EAASpI,EAAGkI,EAAKpI,EAAGsI,EAASnE,IAAKiE,EAAKtB,QAEhFwB,aAAQ,EAARA,EAAU1J,WACb5B,KAAK2J,UAAUhI,KAAK2J,EAAS1J,SAAU0J,EAASpI,EAAGkI,EAAKpI,EAAGsI,EAASnE,IAAKiE,EAAKtB,OAG3EC,EAAMtC,UACTzH,KAAKL,IAAIkD,UACR7C,KAAKE,OAAO6J,EAAMvC,iBAClB,EACA,EACA6D,EACArL,KAAKE,OAAO6J,EAAMvC,iBAAiBjF,OACnC6I,EAAKpI,EACL+G,EAAM7C,UAAUkE,EAAKtB,OAAO5G,EAC5B6G,EAAM7C,UAAUkE,EAAKtB,OAAO3C,IAC5B4C,EAAMtC,WAGPzH,KAAKL,IAAIkD,UACR7C,KAAKE,OAAO6J,EAAMvC,iBAClB,EACAxH,KAAKE,OAAO6J,EAAMvC,iBAAiBjF,OACnC8I,GACC,IACArL,KAAKE,OAAO6J,EAAMvC,iBAAiBjF,SACjCvC,KAAKJ,MAAM2C,OAASwH,EAAM7C,UAAUkE,EAAKtB,OAAO5G,GAAKlD,KAAKE,OAAO6J,EAAMvC,iBAAiBjF,QAC3F6I,EAAKpI,EACL+G,EAAM7C,UAAUkE,EAAKtB,OAAO5G,EAC5B6G,EAAM7C,UAAUkE,EAAKtB,OAAO3C,IAC5BnH,KAAKJ,MAAM2C,OAASwH,EAAM7C,UAAUkE,EAAKtB,OAAO5G,GAa9BlD,KAAKF,WAAW+D,sBAAsB,CACzDd,GAAI/C,KAAKD,OAAOiD,EAChBC,GAAIjD,KAAKD,OAAOmD,EAChBC,GAAIiI,EAAKpI,EACTI,GAAI2G,EAAM7C,UAAUkE,EAAKtB,OAAO5G,EAChCG,GAAIrD,KAAKD,OAAOuD,EAChBC,GAAIvD,KAAKD,OAAOyD,EAChBC,GAAIsG,EAAM7C,UAAUkE,EAAKtB,OAAO3C,IAChCzD,GAAIqG,EAAMtC,WAAazH,KAAKJ,MAAM2C,OAASwH,EAAM7C,UAAUkE,EAAKtB,OAAO5G,EACvES,OAAQ3D,KAAKoK,gBACb3H,OAAQ,UAAGzC,KAAKiF,aAAY,YAAImG,EAAKtB,WAGrBqB,GAAY,E,CAQ1BA,IAAWnL,KAAKD,OAAOmE,SAAU,EACtC,EACD,EA9UA,E,yCCHA,WA2BC,WAAYvE,EAAcC,EAA0BC,GACnDG,KAAKL,IAAMA,EACXK,KAAKJ,MAAQA,EACbI,KAAKuL,YAAc,IACnBvL,KAAKgD,EAAI,IACThD,KAAKkD,EAAI,IACTlD,KAAKsD,EAAI,IACTtD,KAAKwD,EAAIxD,KAAKsD,EAAItD,KAAKuL,YACvBvL,KAAKkE,SAAU,EACflE,KAAKwL,aAAe,GACpBxL,KAAKyL,kBAAoB,GACzBzL,KAAK0L,aAAe1L,KAAKyL,kBACzBzL,KAAKmE,UAAY,EACjBnE,KAAK2L,KAAO,GACZ3L,KAAK4L,SAAW,EAChB5L,KAAK6L,cAAgB,EACrB7L,KAAK8L,WAAY,EACjB9L,KAAKwJ,aAAc,EACnBxJ,KAAK+L,SAAW,EAChB/L,KAAKgM,iBAAmB,CAAEhJ,EAAG,EAAGE,EAAG,GACnClD,KAAK6H,MAAQ,EACb7H,KAAKH,IAAMA,EACXG,KAAKC,WAAa,CACjB,sBACA,6BACA,sBACA,8BAEDD,KAAKE,OAAS,CAAC,EACfF,KAAKiM,gBAAiB,EACtBjM,KAAK6E,cAAgB,EACtB,CAqKD,OAnKc,YAAAzE,MAAb,W,6pCAiB6B,OAhBtBC,EAAgB,WACrB,IAAMC,EAAW,EAAKL,WAAWM,KAAI,SAACC,GACrC,OAAO,IAAIC,SAAQ,SAACC,EAASC,G,MACtBC,EAA4B,QAArB,EAAAJ,EAAKK,MAAM,KAAKC,aAAK,eAAED,MAAM,KAAK,GACzCE,EAAQ,IAAIC,MAElBD,EAAME,IAAMT,EACZO,EAAMG,OAAS,WACdR,EAAQ,CAACE,EAAMG,GAChB,EACAA,EAAMI,QAAU,WAAM,OAAAR,EAAO,gCAAyBH,GAAhC,CACvB,GACD,IACA,OAAOC,QAAQW,IAAId,EACpB,EAE4B,GAAMD,K,cAA5BgB,EAAsB,SAC5BrB,KAAKE,OAASoB,OAAOC,YAAYF,GACjCrB,KAAKsD,EAAItD,KAAKE,OAAOgM,MAAMvJ,MAC3B3C,KAAKwD,EAAIxD,KAAKE,OAAOgM,MAAM3J,O,ySAGrB,YAAAqC,oBAAP,SAA2BnC,GAA3B,WACKA,IAAWzC,KAAK6E,gBACpB7E,KAAK6E,cAAgBpC,EACrBzC,KAAKiM,gBAAiB,EAGtBjF,YAAW,WACV,EAAKiF,gBAAiB,EACtBjF,YAAW,WACV,EAAKiF,gBAAiB,EACtBjF,YAAW,WACV,EAAKiF,gBAAiB,EACtBjF,YAAW,WACV,EAAKiF,gBAAiB,EACtBjF,YAAW,WACV,EAAKiF,gBAAiB,CACvB,GAZkB,GAanB,GAbmB,GAcpB,GAdoB,GAerB,GAfqB,GAgBtB,GAhBsB,IAiBvB,EAEO,YAAA3H,KAAP,SAAYpB,GACPlD,KAAK4L,SAAW,IACpB5L,KAAKkE,SAAU,EACflE,KAAK8L,WAAY,EACjB9L,KAAK6L,cAAgB,EACrB7L,KAAK4L,SAAW,EAChB5L,KAAKmE,UAAY,EACjBnE,KAAKkD,EAAIA,EAAIlD,KAAKwD,EACbxD,KAAKwJ,cAAaxJ,KAAK0L,aAAe1L,KAAKyL,mBACjD,EAEO,YAAAhC,KAAP,WACCzJ,KAAKwJ,aAAc,EACfxJ,KAAK8L,WAAa9L,KAAKkE,SAAWlE,KAAKmE,UAAY,IACvDnE,KAAK6L,cAAgB7L,KAAK0L,aAC1B1L,KAAK8L,WAAY,EAEjB9L,KAAKkE,SAAU,EACflE,KAAKmE,UAAYnE,KAAK0L,aACtB1L,KAAK0L,aAAe1L,KAAKyL,kBAC1B,EAEQ,YAAAU,SAAR,WACKnM,KAAK0L,aAAe1L,KAAKwL,cAC5BxL,KAAK0L,cAAgB,GACrB1L,KAAKH,IAAI4F,eACR,GAAKzF,KAAKwL,aAAexL,KAAK0L,eAAiB1L,KAAKwL,aAAexL,KAAKyL,mBACxEzL,KAAKgD,EACLhD,KAAKkD,IAGNlD,KAAKH,IAAI4F,eAAe,EAAGzF,KAAKgD,EAAGhD,KAAKkD,EAE1C,EAEQ,YAAAkJ,UAAR,WAECpM,KAAKL,IAAI0M,OACTrM,KAAKL,IAAI2M,UAAUtM,KAAKgM,iBAAiBhJ,EAAGhD,KAAKgM,iBAAiB9I,GAClElD,KAAKL,IAAI4M,OAAQvM,KAAK4L,SAAWxH,KAAKoI,GAAM,KAC5CxM,KAAKL,IAAIkD,UACR7C,KAAKiM,eAAiBjM,KAAKE,OAAOuM,aAAezM,KAAKE,OAAOgM,OAC5DlM,KAAKE,OAAOwM,MAAM/J,MAAQ,GAC1B3C,KAAKwD,EAAIxD,KAAKE,OAAOwM,MAAMnK,OAAS,EACrCvC,KAAKsD,EACLtD,KAAKwD,GAENxD,KAAKL,IAAIgN,SACV,EAEQ,YAAAC,WAAR,WACC,IAAMC,EAAY7M,KAAKH,IAAI4E,QAAU,GAAK,EAAIzE,KAAKH,IAAI4E,OAAS,IAAMzE,KAAKH,IAAI4E,QAAU,GAAK,EAAI,EAElGzE,KAAKL,IAAI0M,OACTrM,KAAKL,IAAI2M,UAAUtM,KAAKgM,iBAAiBhJ,EAAI6J,EAAW7M,KAAKgM,iBAAiB9I,GAC9ElD,KAAKL,IAAI4M,OAAQvM,KAAK4L,SAAWxH,KAAKoI,GAAM,KAC5CxM,KAAKL,IAAI4M,OAAQvM,KAAK+L,SAAW3H,KAAKoI,GAAM,KAC5CxM,KAAKL,IAAIkD,UACR7C,KAAKiM,eAAiBjM,KAAKE,OAAO4M,aAAe9M,KAAKE,OAAOwM,OAC5D1M,KAAKE,OAAOwM,MAAM/J,MAAQ,EAAIkK,GAC9B7M,KAAKE,OAAOwM,MAAMnK,OAAS,EAC5BvC,KAAKE,OAAOwM,MAAM/J,MAAQ,GAC1B3C,KAAKE,OAAOwM,MAAMnK,OAAS,IAE5BvC,KAAKL,IAAIgN,UAET3M,KAAKL,IAAI0M,OACTrM,KAAKL,IAAI2M,UAAUtM,KAAKgM,iBAAiBhJ,EAAGhD,KAAKgM,iBAAiB9I,EAAI2J,GACtE7M,KAAKL,IAAI4M,OAAQvM,KAAK4L,SAAWxH,KAAKoI,GAAM,KAC5CxM,KAAKL,IAAI2M,WAAWtM,KAAKgM,iBAAiBhJ,GAAIhD,KAAKgM,iBAAiB9I,GACpElD,KAAKL,IAAI2M,UAAUtM,KAAKgD,EAAIhD,KAAKsD,EAAItD,KAAKE,OAAOwM,MAAM/J,MAAQ,EAAG3C,KAAKgM,iBAAiB9I,GACxFlD,KAAKL,IAAI4M,OAAQvM,KAAK+L,SAAW3H,KAAKoI,GAAM,KAC5CxM,KAAKL,IAAI2M,YAAYtM,KAAKgD,EAAIhD,KAAKsD,EAAItD,KAAKE,OAAOwM,MAAM/J,MAAQ,IAAK3C,KAAKgM,iBAAiB9I,GAC5FlD,KAAKL,IAAI2M,UAAUtM,KAAKgM,iBAAiBhJ,EAAGhD,KAAKgM,iBAAiB9I,GAElElD,KAAKL,IAAIkD,UACR7C,KAAKiM,eAAiBjM,KAAKE,OAAO4M,aAAe9M,KAAKE,OAAOwM,QAC3D1M,KAAKgM,iBAAiBhJ,EAAIhD,KAAKgD,GAAKhD,KAAKsD,EAAItD,KAAKE,OAAOwM,MAAM/J,OAChE3C,KAAKE,OAAOwM,MAAMnK,OAAS,EAAIsK,EAChC7M,KAAKE,OAAOwM,MAAM/J,MAAQ,GAC1B3C,KAAKE,OAAOwM,MAAMnK,OAAS,IAE5BvC,KAAKL,IAAIgN,SACV,EAEO,YAAAhL,KAAP,W,OACiB,QAAX,EAAA3B,KAAKE,cAAM,eAAEgM,SAClBlM,KAAK+L,UAAY/L,KAAK6H,MAGlB7H,KAAKwJ,aAAaxJ,KAAKmM,WAE3BnM,KAAKkD,GAAKlD,KAAKmE,UACXnE,KAAKkE,UAASlE,KAAKmE,WAAanE,KAAK2L,MAErC3L,KAAK8L,YACR9L,KAAK4L,UAAY5L,KAAK6L,cAAgB,EACtC7L,KAAK6L,eAA6B,EAAZ7L,KAAK2L,KAEvB3L,KAAK4L,UAAY,IACpB5L,KAAK6L,cAAgB,IASvB7L,KAAKgM,iBAAmB,CACvBhJ,EAAGhD,KAAKgD,EAAIhD,KAAKE,OAAOwM,MAAM/J,MAAQ,EACtCO,EAAGlD,KAAKkD,EAAIlD,KAAKwD,EAAIxD,KAAKE,OAAOwM,MAAMnK,OAAS,GAGjDvC,KAAK4M,aACL5M,KAAKoM,YACN,EACD,EA/NA,E,cCFIW,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAaE,QAGrB,IAAIC,EAASN,EAAyBE,GAAY,CAGjDG,QAAS,CAAC,GAOX,OAHAE,EAAoBL,GAAUI,EAAQA,EAAOD,QAASJ,GAG/CK,EAAOD,OACf,CCrBAJ,EAAoBO,EAAI,CAACH,EAASI,KACjC,IAAI,IAAIC,KAAOD,EACXR,EAAoBU,EAAEF,EAAYC,KAAST,EAAoBU,EAAEN,EAASK,IAC5EnM,OAAOqM,eAAeP,EAASK,EAAK,CAAEG,YAAY,EAAMC,IAAKL,EAAWC,IAE1E,ECNDT,EAAoBU,EAAI,CAACI,EAAKC,IAAUzM,OAAO0M,UAAUC,eAAeC,KAAKJ,EAAKC,GCGlFf,EAAoB,KACpBA,EAAoB,IACpBA,EAAoB,KACpBA,EAAoB,IACpBA,EAAoB,KACpBA,EAAoB,KACMA,EAAoB,I","sources":["webpack://bike_game/./src/abilities.ts","webpack://bike_game/./src/collisions.ts","webpack://bike_game/./src/hud.ts","webpack://bike_game/./public/gameObject.ts","webpack://bike_game/./src/index.ts","webpack://bike_game/./src/platforms.ts","webpack://bike_game/./src/player.ts","webpack://bike_game/webpack/bootstrap","webpack://bike_game/webpack/runtime/define property getters","webpack://bike_game/webpack/runtime/hasOwnProperty shorthand","webpack://bike_game/webpack/startup"],"sourcesContent":["import Collisions from './collisions';\r\nimport Hud from './hud';\r\nimport Player from './player';\r\nimport { Context, IPowerUp } from './types';\r\n\r\nexport default class Abilities {\r\n\tctx: Context;\r\n\tworld: HTMLCanvasElement;\r\n\thud: Hud;\r\n\tcollisions: Collisions;\r\n\tplayer: Player;\r\n\timagePaths: string[];\r\n\timages: any;\r\n\tcollectedPowerUps: string[];\r\n\r\n\tconstructor(ctx: Context, world: HTMLCanvasElement, hud: Hud, collisions: Collisions, player: Player) {\r\n\t\tthis.ctx = ctx;\r\n\t\tthis.world = world;\r\n\t\tthis.hud = hud;\r\n\t\tthis.collisions = collisions;\r\n\t\tthis.player = player;\r\n\t\tthis.imagePaths = ['../public/healthBoost.png'];\r\n\t\tthis.images = {};\r\n\t\tthis.collectedPowerUps = [];\r\n\t}\r\n\r\n\tpublic async setUp() {\r\n\t\tconst preloadImages = () => {\r\n\t\t\tconst promises = this.imagePaths.map((path: string) => {\r\n\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\tconst name = path.split('/').pop()?.split('.')[0];\r\n\t\t\t\t\tconst image = new Image();\r\n\r\n\t\t\t\t\timage.src = path;\r\n\t\t\t\t\timage.onload = () => {\r\n\t\t\t\t\t\tresolve([name, image]);\r\n\t\t\t\t\t};\r\n\t\t\t\t\timage.onerror = () => reject(`Image failed to load: ${path}`);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\treturn Promise.all(promises);\r\n\t\t};\r\n\r\n\t\tconst imgArraytemp: any[] = await preloadImages();\r\n\t\tthis.images = Object.fromEntries(imgArraytemp);\r\n\t}\r\n\r\n\tprivate activatePowerUp(powerUp: string) {\r\n\t\tswitch (powerUp) {\r\n\t\t\tcase 'healthBoost':\r\n\t\t\t\tthis.hud.increaseHealth(20);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic draw(powerUps: IPowerUp[], platYTop: number, platX: number, platLen: number, platIndex: number) {\r\n\t\tfor (let i = 0; i < powerUps?.length; i++) {\r\n\t\t\tconst imgSrc: HTMLImageElement = this.images[powerUps[i].name];\r\n\r\n\t\t\tif (!imgSrc) continue;\r\n\r\n\t\t\tconst imgX = platX + platLen * powerUps[i].xPercAlongPlat;\r\n\t\t\tconst imgY = platYTop - imgSrc.height + 10 - powerUps[i].distAbovePlat;\r\n\t\t\tconst object = `${powerUps[i].name}_${platIndex}_${powerUps[i].xPercAlongPlat}`;\r\n\r\n\t\t\tif (this.collectedPowerUps.includes(object)) {\r\n\t\t\t\tif (imgX + imgSrc.width < 0) this.collectedPowerUps.shift();\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tthis.ctx.drawImage(imgSrc, imgX, imgY, imgSrc.width, imgSrc.height);\r\n\r\n\t\t\tconst collidedWithPowerUp = this.collisions.powerUpCollision({\r\n\t\t\t\tx1: this.player.x,\r\n\t\t\t\ty1: this.player.y,\r\n\t\t\t\tx2: imgX,\r\n\t\t\t\ty2: imgY,\r\n\t\t\t\tw1: this.player.w,\r\n\t\t\t\th1: this.player.h,\r\n\t\t\t\tw2: this.images[powerUps[i].name].width,\r\n\t\t\t\th2:\r\n\t\t\t\t\tthis.images[powerUps[i].name].height ||\r\n\t\t\t\t\tthis.world.height - (platYTop - this.images[powerUps[i].name].height + 10),\r\n\t\t\t\tmargin: 0,\r\n\t\t\t\tobject: object,\r\n\t\t\t});\r\n\r\n\t\t\tif (collidedWithPowerUp) {\r\n\t\t\t\tthis.collectedPowerUps.push(object);\r\n\t\t\t\tthis.activatePowerUp(powerUps[i].name);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","import Hud from './hud';\r\nimport Player from './player';\r\nimport { Context, ICollisionArgs } from './types';\r\n\r\nexport default class Collisions {\r\n\tprivate ctx: Context;\r\n\tprivate world: HTMLCanvasElement;\r\n\tprivate player: Player;\r\n\tprivate hud: Hud;\r\n\r\n\tconstructor(ctx: Context, world: HTMLCanvasElement, player: Player, hud: Hud) {\r\n\t\tthis.ctx = ctx;\r\n\t\tthis.world = world;\r\n\t\tthis.player = player;\r\n\t\tthis.hud = hud;\r\n\t}\r\n\r\n\tpublic checkForPlatCollision({ x1, y1, x2, y2, w1, h1, w2, h2, margin, object }: ICollisionArgs): boolean {\r\n\t\tconst playerRightOfPlatLeft = x1 + w1 >= x2 + margin; // Player right side to right of plat left\r\n\t\tconst playerLeftOfPlatRight = x1 <= x2 + w2; // Player left side to left of plat right\r\n\t\tconst playerAbovePlatBot = y1 <= y2 + h2; //Player top above plat bottom\r\n\t\tconst playerBelowPlatTop = y1 + this.player.h > y2 + (this.player.isInAir ? margin : 0); // Player bottom above plat top\r\n\r\n\t\tif (playerRightOfPlatLeft && playerLeftOfPlatRight && playerAbovePlatBot) {\r\n\t\t\t// Land if negative velocity and within 20px of platform\r\n\t\t\tif (this.player.yVelocity <= 0 && Math.abs(y2 - (y1 + h1)) < 16) {\r\n\t\t\t\tthis.player.land(y2);\r\n\t\t\t\treturn true;\r\n\t\t\t} else if (playerBelowPlatTop) {\r\n\t\t\t\tconsole.log('Platform Collision!');\r\n\t\t\t\tthis.hud.health = 0;\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.player.y + this.player.h > this.world.height) {\r\n\t\t\tthis.hud.health = 0;\r\n\t\t\tconsole.log('Out Of Bounds Collision!');\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tpublic checkForCollision({ x1, y1, x2, y2, w1, h1, w2, h2, margin, object }: ICollisionArgs) {\r\n\t\tif (\r\n\t\t\tx1 + w1 >= x2 + margin && // Check player right collision\r\n\t\t\tx1 <= x2 + w2 && // Check player left collision\r\n\t\t\ty1 <= y2 + h2 && // Check player top collision\r\n\t\t\ty1 + h1 > y2 // Check player bottom collision\r\n\t\t) {\r\n\t\t\tthis.hud.reduceHealth(object, 30);\r\n\t\t\tthis.player.changeToDamagedImgs(object);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic powerUpCollision({ x1, y1, x2, y2, w1, h1, w2, h2, margin, object }: ICollisionArgs): boolean {\r\n\t\tif (\r\n\t\t\tx1 + w1 >= x2 + margin && // Check player right collision\r\n\t\t\tx1 <= x2 + w2 && // Check player left collision\r\n\t\t\ty1 <= y2 + h2 && // Check player top collision\r\n\t\t\ty1 + h1 > y2 // Check player bottom collision\r\n\t\t) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n}\r\n","import throttle from '../utils/throttle';\r\nimport { Context } from './types';\r\n\r\nexport default class Hud {\r\n\tprivate ctx: Context;\r\n\tprivate world: HTMLCanvasElement;\r\n\tpublic health: number;\r\n\tprivate lastObjectHit: any;\r\n\tpublic drawingLevelText: boolean;\r\n\tprivate levelTextOpacity: number;\r\n\tprivate levelTextOpacityInc: number;\r\n\tpublic currentLevel: number;\r\n\tpublic fps: number;\r\n\tpublic fpsEnabled: boolean;\r\n\r\n\tconstructor(ctx: Context, world: HTMLCanvasElement) {\r\n\t\tthis.ctx = ctx;\r\n\t\tthis.world = world;\r\n\t\tthis.health = 100;\r\n\t\tthis.lastObjectHit = '';\r\n\t\tthis.drawingLevelText = false;\r\n\t\tthis.levelTextOpacity = 0;\r\n\t\tthis.levelTextOpacityInc = 0.02;\r\n\t\tthis.currentLevel = 0;\r\n\t\tthis.fps = 0;\r\n\t\tthis.fpsEnabled = true;\r\n\t}\r\n\r\n\tprivate drawFps() {\r\n\t\tif (!this.fpsEnabled) return;\r\n\r\n\t\tthis.ctx.font = '20px Arial';\r\n\t\tthis.ctx.fillStyle = 'rgba(0, 255, 0, 1)';\r\n\t\tthis.ctx.textAlign = 'right';\r\n\t\tthis.ctx.fillText(`${this.fps} FPS`, this.world.width - 20, 30);\r\n\t}\r\n\r\n\tpublic drawJumpCharge(percentCharged: number, x: number, y: number) {\r\n\t\tconst w = 8;\r\n\t\tconst h = 60;\r\n\t\tconst xOffset = 0;\r\n\t\tconst yOffset = -20;\r\n\t\tthis.ctx.strokeStyle = 'rgb(0, 0, 0)';\r\n\t\tthis.ctx.fillStyle = 'rgb(7, 191, 4)';\r\n\t\tthis.ctx.beginPath();\r\n\t\tthis.ctx.rect(x + xOffset - 1, y + yOffset - 1, w + 2, h + 2);\r\n\t\tthis.ctx.stroke();\r\n\t\tthis.ctx.fillRect(x + xOffset, y + yOffset + h, w, -h * percentCharged);\r\n\t}\r\n\r\n\tpublic reduceHealth(object: string, amt: number) {\r\n\t\tif (this.lastObjectHit === object) return;\r\n\t\tif (this.health - amt <= 0) this.health = 0;\r\n\t\telse this.health -= amt;\r\n\r\n\t\tthis.lastObjectHit = object;\r\n\t}\r\n\r\n\tpublic increaseHealth(amt: number) {\r\n\t\tif (this.health + amt >= 100) this.health = 100;\r\n\t\telse this.health += amt;\r\n\t}\r\n\r\n\tprivate drawHealth() {\r\n\t\tconst sectionStartX = 30;\r\n\t\tconst sectionStartY = 11;\r\n\t\tconst sectionW = 160;\r\n\t\tconst sectionH = 12;\r\n\r\n\t\tthis.ctx.shadowOffsetX = 3;\r\n\t\tthis.ctx.shadowOffsetY = 3;\r\n\t\tthis.ctx.shadowColor = 'rgba(0, 0, 0, 0.5)';\r\n\t\tthis.ctx.shadowBlur = 4;\r\n\r\n\t\tthis.ctx.lineWidth = 2;\r\n\t\tthis.ctx.strokeStyle = 'rgba(0, 0, 0, 1)';\r\n\t\tthis.ctx.beginPath();\r\n\t\tthis.ctx.roundRect(sectionStartX - 1, sectionStartY - 1, sectionW + 2, sectionH + 2, 10);\r\n\t\tthis.ctx.stroke();\r\n\r\n\t\tthis.ctx.fillStyle =\r\n\t\t\tthis.health >= 90\r\n\t\t\t\t? 'rgba(0, 170, 0, 1)'\r\n\t\t\t\t: this.health >= 50 && this.health < 90\r\n\t\t\t\t? 'rgba(170, 170, 0, 1)'\r\n\t\t\t\t: 'rgba(255, 0, 0, 1)';\r\n\t\tthis.ctx.beginPath();\r\n\t\tthis.ctx.roundRect(sectionStartX, sectionStartY, sectionW * (this.health / 100), sectionH, 10);\r\n\t\tthis.ctx.fill();\r\n\r\n\t\tthis.ctx.shadowOffsetX = 0;\r\n\t\tthis.ctx.shadowOffsetY = 0;\r\n\t\tthis.ctx.shadowBlur = 0;\r\n\t}\r\n\r\n\tprivate drawNextLevelText() {\r\n\t\tconst w = 250;\r\n\t\tconst h = 70;\r\n\t\tconst yOffset = -200;\r\n\r\n\t\tthis.ctx.fillStyle = `rgba(0, 0, 0, ${this.levelTextOpacity >= 0.7 ? 0.7 : this.levelTextOpacity})`;\r\n\t\tthis.ctx.beginPath();\r\n\t\tthis.ctx.roundRect(this.world.width / 2 - w / 2, this.world.height / 2 - h / 2 + yOffset, w, h, 10);\r\n\t\tthis.ctx.fill();\r\n\r\n\t\tthis.ctx.font = '40px Arial';\r\n\t\tthis.ctx.fillStyle = `rgba(255, 255, 255, ${this.levelTextOpacity})`;\r\n\t\tthis.ctx.textAlign = 'center';\r\n\t\tthis.ctx.textBaseline = 'middle';\r\n\t\tthis.ctx.fillText(\r\n\t\t\t`Level ${this.currentLevel + 1}`,\r\n\t\t\tthis.world.width / 2,\r\n\t\t\tthis.world.height / 2 + yOffset\r\n\t\t);\r\n\r\n\t\tthis.levelTextOpacity += this.levelTextOpacityInc;\r\n\t}\r\n\r\n\tpublic beginLevelTextAnimation() {\r\n\t\tthis.drawingLevelText = true;\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.levelTextOpacityInc *= -1;\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.drawingLevelText = false;\r\n\t\t\t\tthis.levelTextOpacityInc *= -1;\r\n\t\t\t}, 1500);\r\n\t\t}, 1500);\r\n\t}\r\n\r\n\tpublic draw() {\r\n\t\tthis.drawHealth();\r\n\t\tthis.drawFps();\r\n\r\n\t\tif (this.drawingLevelText) this.drawNextLevelText();\r\n\t}\r\n}\r\n","import { IGameObject, ILevel } from '../src/types';\r\n\r\nconst levelOne: ILevel = {\r\n\tplatforms: [\r\n\t\t{\r\n\t\t\ty: 600,\r\n\t\t\tlen: 3000,\r\n\t\t\tgapToNext: 0,\r\n\t\t\tdecor: [{ name: 'startSign', xLocsOnPlatByPerc: [0.6] }],\r\n\t\t},\r\n\t\t{\r\n\t\t\ty: 600,\r\n\t\t\tlen: 2000,\r\n\t\t\tgapToNext: 200,\r\n\t\t},\r\n\t\t{\r\n\t\t\ty: 700,\r\n\t\t\tlen: 1000,\r\n\t\t\tgapToNext: 0,\r\n\t\t},\r\n\t\t{ y: 600, len: 800, gapToNext: 0 },\r\n\t\t{ y: 500, len: 2000, gapToNext: 0, obsticles: [{ name: 'rock2', xLocsOnPlatByPerc: [0.4] }] },\r\n\t\t{ y: 700, len: 1200, gapToNext: 0 },\r\n\t\t{ y: 450, len: 1000, gapToNext: 0, obsticles: [{ name: 'rock3', xLocsOnPlatByPerc: [0.8] }] },\r\n\t\t{ y: 650, len: 1000, gapToNext: 0 },\r\n\t\t{ y: 625, len: 600, gapToNext: 0 },\r\n\t\t{ y: 600, len: 800, gapToNext: 50 },\r\n\t\t{ y: 550, len: 1000, gapToNext: 0, obsticles: [{ name: 'rock3', xLocsOnPlatByPerc: [0.1] }] },\r\n\t\t{ y: 410, len: 1000, gapToNext: 300 },\r\n\t\t{ y: 700, len: 1000, gapToNext: 0, obsticles: [{ name: 'rock1', xLocsOnPlatByPerc: [0.6] }] },\r\n\t\t{ y: 600, len: 800, gapToNext: 0 },\r\n\t\t{ y: 700, len: 1200, gapToNext: 100 },\r\n\t\t{ y: 450, len: 1000, gapToNext: 0, obsticles: [{ name: 'rock1', xLocsOnPlatByPerc: [0.8] }] },\r\n\t\t{\r\n\t\t\ty: 650,\r\n\t\t\tlen: 1000,\r\n\t\t\tgapToNext: 0,\r\n\t\t\tpowerUps: [{ name: 'healthBoost', xPercAlongPlat: 0.1, distAbovePlat: 300 }],\r\n\t\t},\r\n\t\t{\r\n\t\t\ty: 625,\r\n\t\t\tlen: 600,\r\n\t\t\tgapToNext: 0,\r\n\t\t},\r\n\t],\r\n\tplatformTexture: 'dirtPlat',\r\n\tplatformH: null,\r\n\tbackgroundImg: 'bgLevel1',\r\n\tbgImgYOffset: 0,\r\n\tmaxPlatLen: 4000,\r\n\tspeed: 14,\r\n};\r\n\r\nconst levelTwo: ILevel = {\r\n\tplatforms: [\r\n\t\t{\r\n\t\t\ty: 600,\r\n\t\t\tlen: 3000,\r\n\t\t\tgapToNext: 0,\r\n\t\t},\r\n\t\t{\r\n\t\t\ty: 600,\r\n\t\t\tlen: 2000,\r\n\t\t\tgapToNext: 200,\r\n\t\t},\r\n\t\t{ y: 700, len: 1000, gapToNext: 0, obsticles: [{ name: 'rock1', xLocsOnPlatByPerc: [0.1] }] },\r\n\t\t{ y: 600, len: 800, gapToNext: 0 },\r\n\t\t{ y: 500, len: 2000, gapToNext: 0, obsticles: [{ name: 'rock2', xLocsOnPlatByPerc: [0.4] }] },\r\n\t\t{ y: 700, len: 1200, gapToNext: 0 },\r\n\t\t{ y: 450, len: 1000, gapToNext: 0, obsticles: [{ name: 'rock3', xLocsOnPlatByPerc: [0.8] }] },\r\n\t\t{ y: 650, len: 1000, gapToNext: 0 },\r\n\t\t{ y: 625, len: 600, gapToNext: 0 },\r\n\t\t{\r\n\t\t\ty: 600,\r\n\t\t\tlen: 800,\r\n\t\t\tgapToNext: 50,\r\n\t\t\tpowerUps: [{ name: 'healthBoost', xPercAlongPlat: 0.2, distAbovePlat: 300 }],\r\n\t\t},\r\n\t\t{ y: 700, len: 2000, gapToNext: 0 },\r\n\t\t{ y: 550, len: 700, gapToNext: 0, obsticles: [{ name: 'rock3', xLocsOnPlatByPerc: [0.1] }] },\r\n\t\t{ y: 410, len: 1000, gapToNext: 300 },\r\n\t\t{ y: 700, len: 1000, gapToNext: 0, obsticles: [{ name: 'rock1', xLocsOnPlatByPerc: [0.6] }] },\r\n\t\t{ y: 600, len: 800, gapToNext: 0 },\r\n\t\t{ y: 550, len: 1500, gapToNext: 0, obsticles: [{ name: 'rock3', xLocsOnPlatByPerc: [0.4] }] },\r\n\t\t{ y: 700, len: 1200, gapToNext: 100 },\r\n\t\t{ y: 450, len: 1000, gapToNext: 0, obsticles: [{ name: 'rock1', xLocsOnPlatByPerc: [0.8] }] },\r\n\t\t{ y: 650, len: 1000, gapToNext: 0 },\r\n\t\t{ y: 625, len: 600, gapToNext: 0 },\r\n\t],\r\n\tplatformTexture: 'woodPlat',\r\n\tplatformH: 16,\r\n\tbackgroundImg: 'bgLevel2',\r\n\tbgImgYOffset: 600,\r\n\tmaxPlatLen: 4000,\r\n\tspeed: 16,\r\n};\r\n\r\nconst gameObject: IGameObject = {\r\n\tlevels: [levelOne, levelTwo],\r\n};\r\n\r\nexport default gameObject;\r\n","import gameObject from '../public/gameObject';\r\nimport Abilities from './abilities';\r\nimport Collisions from './collisions';\r\nimport Hud from './hud';\r\nimport Platforms from './platforms';\r\nimport Player from './player';\r\n\r\nconst world = <HTMLCanvasElement>document.getElementById('world');\r\nconst ctx = <CanvasRenderingContext2D>world.getContext('2d', { alpha: false });\r\n\r\nconst startBtn = <HTMLDivElement>document.querySelector('.startBtn');\r\n\r\n// For game loop\r\nlet requestId: number | null, now: number, then: number, elapsed: number, fpsInterval: number;\r\n\r\nlet frameRate = 60;\r\nlet frames = 0;\r\nlet paused = false;\r\nlet levelsStarted = -1;\r\n\r\n// Classes\r\nlet platforms: Platforms, player: Player, hud: Hud, collisions: Collisions, abilities: Abilities;\r\n\r\nconst endGame = () => {\r\n\tif (requestId) cancelAnimationFrame(requestId);\r\n\trequestId = null;\r\n\tprepGame();\r\n\tstartBtn.style.display = 'block';\r\n\tstartBtn.innerHTML = 'Play Again';\r\n\tlevelsStarted = -1;\r\n};\r\n\r\nconst gameLoop = () => {\r\n\trequestId = requestAnimationFrame(gameLoop);\r\n\r\n\tfpsInterval = 1000 / frameRate;\r\n\tnow = Date.now();\r\n\telapsed = now - (then || 0);\r\n\r\n\tif (elapsed > fpsInterval) {\r\n\t\tif (frames === 0)\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\thud.fps = frames;\r\n\t\t\t\tframes = 0;\r\n\t\t\t}, 1000);\r\n\t\tframes += 1;\r\n\t\tthen = now - (elapsed % fpsInterval);\r\n\r\n\t\tctx.clearRect(0, 0, world.width, world.height);\r\n\t\tif (!paused) {\r\n\t\t\tplatforms.move();\r\n\t\t\tplayer.speed = gameObject.levels[platforms.currentLevel].speed;\r\n\t\t} else {\r\n\t\t\tplayer.speed = 0;\r\n\t\t}\r\n\t\tplatforms.draw();\r\n\t\tplayer.draw();\r\n\t\thud.draw();\r\n\r\n\t\t// if (platforms.platsVisible?.[0]?.index === 0 && platforms.currentLevel > levelsStarted) {\r\n\t\t// \tlevelsStarted = platforms.currentLevel;\r\n\t\t// }\r\n\r\n\t\tif (hud.health === 0) endGame();\r\n\t}\r\n};\r\n\r\nconst startGame = () => {\r\n\tgameLoop();\r\n};\r\n\r\nconst prepGame = async () => {\r\n\tObject.freeze(gameObject);\r\n\r\n\thud = new Hud(ctx, world);\r\n\tplayer = new Player(ctx, world, hud);\r\n\tcollisions = new Collisions(ctx, world, player, hud);\r\n\tabilities = new Abilities(ctx, world, hud, collisions, player);\r\n\tplatforms = new Platforms(ctx, world, player, hud, collisions, abilities, gameObject);\r\n\r\n\tawait platforms.setUp();\r\n\tawait player.setUp();\r\n\tawait abilities.setUp();\r\n\r\n\t// startGame();\r\n\tstartBtn.style.display = 'block';\r\n};\r\n\r\nprepGame();\r\n\r\ndocument.addEventListener('keydown', e => {\r\n\tswitch (e.code) {\r\n\t\tcase 'Space':\r\n\t\t\tif (requestId) {\r\n\t\t\t\tif (paused) {\r\n\t\t\t\t\tpaused = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (!player.loadingJump) player.loadingJump = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t}\r\n});\r\n\r\ndocument.addEventListener('keyup', e => {\r\n\tswitch (e.code) {\r\n\t\tcase 'Escape':\r\n\t\t\tif (paused) {\r\n\t\t\t\tpaused = false;\r\n\t\t\t} else {\r\n\t\t\t\tpaused = true;\r\n\t\t\t}\r\n\t\tcase 'Space':\r\n\t\t\tplayer.jump();\r\n\t\t\tbreak;\r\n\t}\r\n});\r\n\r\nstartBtn.onclick = () => {\r\n\tstartGame();\r\n\tstartBtn.style.display = 'none';\r\n};\r\n","import Abilities from './abilities';\r\nimport Collisions from './collisions';\r\nimport Hud from './hud';\r\nimport Player from './player';\r\nimport { Context, IGameObject, ILevel, IPlatObject, IPlatform, IPowerUp, IVisiblePlat } from './types';\r\n\r\nexport default class Platforms {\r\n\tprivate ctx: Context;\r\n\tprivate world: HTMLCanvasElement;\r\n\tprivate player: Player;\r\n\tprivate hud: Hud;\r\n\tprivate collisions: Collisions;\r\n\tprivate abilities: Abilities;\r\n\tprivate gameObject: IGameObject;\r\n\tpublic currentLevel: number;\r\n\tpublic platsVisible: IVisiblePlat[];\r\n\tprivate backgroundX: number;\r\n\tprivate backgroundX2: number;\r\n\tprivate bgImgYOffset: number;\r\n\tprivate bgImgYOffset2: number;\r\n\tpublic gameOver: boolean;\r\n\tprivate collisionMargin: number;\r\n\tprivate imagePaths: string[];\r\n\tprivate images: any;\r\n\tprivate bgImg1: string;\r\n\tprivate bgImg2: string;\r\n\r\n\tconstructor(\r\n\t\tctx: Context,\r\n\t\tworld: HTMLCanvasElement,\r\n\t\tplayer: Player,\r\n\t\thud: Hud,\r\n\t\tcollisions: Collisions,\r\n\t\tabilities: Abilities,\r\n\t\tgameObject: any\r\n\t) {\r\n\t\tthis.ctx = ctx;\r\n\t\tthis.world = world;\r\n\t\tthis.player = player;\r\n\t\tthis.hud = hud;\r\n\t\tthis.collisions = collisions;\r\n\t\tthis.abilities = abilities;\r\n\t\tthis.gameObject = gameObject;\r\n\t\tthis.currentLevel = 0;\r\n\t\tthis.platsVisible = [\r\n\t\t\t{\r\n\t\t\t\tindex: 0,\r\n\t\t\t\tx: 0,\r\n\t\t\t\tlevel: 0,\r\n\t\t\t},\r\n\t\t];\r\n\t\tthis.backgroundX = 0;\r\n\t\tthis.backgroundX2 = this.world.width;\r\n\t\tthis.bgImgYOffset = 0;\r\n\t\tthis.bgImgYOffset2 = 0;\r\n\t\tthis.gameOver = false;\r\n\t\tthis.collisionMargin = 26;\r\n\t\tthis.imagePaths = [\r\n\t\t\t'../public/bgLevel1.png',\r\n\t\t\t'../public/bgLevel2.png',\r\n\t\t\t// Platform Textures\r\n\t\t\t'../public/woodPlat.png',\r\n\t\t\t'../public/dirtPlat.png',\r\n\t\t\t// Decor\r\n\t\t\t'../public/startSign.png',\r\n\t\t\t// Obsticles\r\n\t\t\t'../public/rock1.png',\r\n\t\t\t'../public/rock2.png',\r\n\t\t\t'../public/rock3.png',\r\n\t\t];\r\n\t\tthis.images = {};\r\n\t\tthis.bgImg1 = '';\r\n\t\tthis.bgImg2 = '';\r\n\t}\r\n\r\n\tpublic async setUp() {\r\n\t\tconst preloadImages = () => {\r\n\t\t\tconst promises = this.imagePaths.map((path: string) => {\r\n\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\tconst name = path.split('/').pop()?.split('.')[0];\r\n\t\t\t\t\tconst image = new Image();\r\n\r\n\t\t\t\t\timage.src = path;\r\n\t\t\t\t\timage.onload = () => {\r\n\t\t\t\t\t\tresolve([name, image]);\r\n\t\t\t\t\t};\r\n\t\t\t\t\timage.onerror = () => reject(`Image failed to load: ${path}`);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\treturn Promise.all(promises);\r\n\t\t};\r\n\r\n\t\tconst imgArraytemp: any[] = await preloadImages();\r\n\t\tthis.images = Object.fromEntries(imgArraytemp);\r\n\t}\r\n\r\n\tprivate nextPlatform() {\r\n\t\tconst lastVisiblePlat: IVisiblePlat = this.platsVisible[this.platsVisible.length - 1];\r\n\t\tconst platsRef: IPlatform[] = this.gameObject.levels[this.currentLevel].platforms;\r\n\t\tconst lastPlatRef: IPlatform = platsRef[lastVisiblePlat.index];\r\n\t\t// const nextPlat: IPlatform = platsRef[lastVisiblePlat.index + 1];\r\n\r\n\t\tif (lastVisiblePlat.index === platsRef.length - 1) {\r\n\t\t\tthis.currentLevel += 1;\r\n\r\n\t\t\tthis.platsVisible.push({\r\n\t\t\t\tindex: 0,\r\n\t\t\t\tx: lastVisiblePlat.x + lastPlatRef.len + lastPlatRef.gapToNext,\r\n\t\t\t\tlevel: this.currentLevel,\r\n\t\t\t});\r\n\r\n\t\t\tif (this.platsVisible[0].x + platsRef[this.platsVisible[0].index].len < 0) this.platsVisible.shift();\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (lastVisiblePlat.index === 0) {\r\n\t\t\tthis.hud.currentLevel = this.currentLevel;\r\n\t\t\tthis.hud.beginLevelTextAnimation();\r\n\t\t}\r\n\r\n\t\tthis.platsVisible.push({\r\n\t\t\tindex: lastVisiblePlat.index + 1,\r\n\t\t\tx: lastVisiblePlat.x + lastPlatRef.len + lastPlatRef.gapToNext,\r\n\t\t\tlevel: this.currentLevel,\r\n\t\t});\r\n\r\n\t\tif (this.platsVisible[0].x + platsRef[this.platsVisible[0].index].len < 0) this.platsVisible.shift();\r\n\t}\r\n\r\n\tpublic move() {\r\n\t\tconst level: ILevel = this.gameObject.levels[this.currentLevel];\r\n\t\tconst platRef: IPlatform = level.platforms[this.platsVisible[this.platsVisible.length - 1].index];\r\n\r\n\t\tconst lastPlatX = this.platsVisible[this.platsVisible.length - 1].x;\r\n\r\n\t\tif (lastPlatX + platRef.len <= this.world.width) this.nextPlatform();\r\n\r\n\t\tfor (let i = 0; i < this.platsVisible.length; i++) this.platsVisible[i].x -= level.speed;\r\n\t\tthis.backgroundX -= level.speed / 8;\r\n\t\tif (this.bgImg2) this.backgroundX2 -= level.speed / 8;\r\n\t}\r\n\r\n\tprivate drawDecorForPlat(decor: IPlatObject[], platYTop: number, platX: number, platLen: number) {\r\n\t\tfor (let i = 0; i < decor?.length; i++) {\r\n\t\t\tconst imgSrc: HTMLImageElement = this.images[decor[i].name];\r\n\t\t\tconst decorXVals = decor[i].xLocsOnPlatByPerc;\r\n\r\n\t\t\tfor (let i = 0; i < decorXVals?.length; i++) {\r\n\t\t\t\tthis.ctx.drawImage(\r\n\t\t\t\t\timgSrc,\r\n\t\t\t\t\tplatX + platLen * decorXVals[i],\r\n\t\t\t\t\tplatYTop - this.images[decor[i].name].height + 10,\r\n\t\t\t\t\tthis.images[decor[i].name].width,\r\n\t\t\t\t\tthis.images[decor[i].name].height\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate drawObsticleOnPlat(\r\n\t\tobsticles: IPlatObject[],\r\n\t\tplatYTop: number,\r\n\t\tplatX: number,\r\n\t\tplatLen: number,\r\n\t\tplatIndex: number\r\n\t) {\r\n\t\tfor (let i = 0; i < obsticles?.length; i++) {\r\n\t\t\tconst imgSrc: HTMLImageElement = this.images[obsticles[i].name];\r\n\t\t\tconst obsticleXVals = obsticles[i].xLocsOnPlatByPerc;\r\n\r\n\t\t\tfor (let i = 0; i < obsticleXVals?.length; i++) {\r\n\t\t\t\tthis.ctx.drawImage(\r\n\t\t\t\t\timgSrc,\r\n\t\t\t\t\tplatX + platLen * obsticleXVals[i],\r\n\t\t\t\t\tplatYTop - this.images[obsticles[i].name].height + 10,\r\n\t\t\t\t\tthis.images[obsticles[i].name].width,\r\n\t\t\t\t\tthis.images[obsticles[i].name].height\r\n\t\t\t\t);\r\n\r\n\t\t\t\tthis.collisions.checkForCollision({\r\n\t\t\t\t\tx1: this.player.x,\r\n\t\t\t\t\ty1: this.player.y,\r\n\t\t\t\t\tx2: platX + platLen * obsticleXVals[i],\r\n\t\t\t\t\ty2: platYTop - this.images[obsticles[i].name].height + 10,\r\n\t\t\t\t\tw1: this.player.w,\r\n\t\t\t\t\th1: this.player.h,\r\n\t\t\t\t\tw2: this.images[obsticles[i].name].width,\r\n\t\t\t\t\th2:\r\n\t\t\t\t\t\tthis.images[obsticles[i].name].height ||\r\n\t\t\t\t\t\tthis.world.height - (platYTop - this.images[obsticles[i].name].height + 10),\r\n\t\t\t\t\tmargin: this.collisionMargin,\r\n\t\t\t\t\tobject: `${obsticles[i].name}_${platIndex}_${obsticleXVals[i]}`,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate drawBgImage() {\r\n\t\tif (!this.bgImg1.length) {\r\n\t\t\tthis.bgImgYOffset = this.gameObject.levels[this.currentLevel].bgImgYOffset;\r\n\t\t\tthis.bgImg1 = this.gameObject.levels[this.currentLevel].backgroundImg;\r\n\t\t}\r\n\r\n\t\tif (this.bgImg2.length && this.backgroundX2 <= 0) {\r\n\t\t\tthis.bgImg1 = this.gameObject.levels[this.currentLevel].backgroundImg;\r\n\t\t\tthis.bgImg2 = '';\r\n\t\t\tthis.backgroundX = this.backgroundX2;\r\n\t\t\tthis.backgroundX2 = this.world.width;\r\n\t\t\tthis.bgImgYOffset = this.bgImgYOffset2;\r\n\t\t\tthis.bgImgYOffset2 = 0;\r\n\t\t}\r\n\r\n\t\tconst bgImage1 = this.images[this.bgImg1]; // Left Side Background\r\n\r\n\t\tif (\r\n\t\t\t(this.backgroundX + bgImage1.width < this.world.width ||\r\n\t\t\t\tthis.platsVisible[0].level !== this.currentLevel) &&\r\n\t\t\t!this.bgImg2.length\r\n\t\t) {\r\n\t\t\tthis.backgroundX2 = this.world.width;\r\n\t\t\tthis.bgImgYOffset2 = this.gameObject.levels[this.currentLevel].bgImgYOffset;\r\n\t\t\tthis.bgImg2 = this.gameObject.levels[this.currentLevel].backgroundImg;\r\n\t\t}\r\n\r\n\t\tconst bgImage2 = this.images?.[this.bgImg2]; // Right Side Background\r\n\r\n\t\tthis.ctx.drawImage(\r\n\t\t\tbgImage1,\r\n\t\t\t0,\r\n\t\t\t0,\r\n\t\t\tbgImage1.width,\r\n\t\t\tbgImage1.height,\r\n\t\t\tthis.backgroundX,\r\n\t\t\tthis.world.height - bgImage1.height + this.bgImgYOffset,\r\n\t\t\tbgImage1.width,\r\n\t\t\tbgImage1.height\r\n\t\t);\r\n\r\n\t\tif (bgImage2) {\r\n\t\t\tthis.ctx.drawImage(\r\n\t\t\t\tbgImage2,\r\n\t\t\t\t0,\r\n\t\t\t\t0,\r\n\t\t\t\tbgImage2.width,\r\n\t\t\t\tbgImage2.height,\r\n\t\t\t\tthis.backgroundX2,\r\n\t\t\t\tthis.world.height - bgImage2.height + this.bgImgYOffset2,\r\n\t\t\t\tbgImage2.width,\r\n\t\t\t\tbgImage2.height\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic draw() {\r\n\t\tthis.drawBgImage();\r\n\r\n\t\tlet isFalling = true;\r\n\t\tfor (const plat of this.platsVisible) {\r\n\t\t\tconst level: ILevel = this.gameObject.levels[plat.level];\r\n\t\t\tconst imgW =\r\n\t\t\t\tthis.images[level.platformTexture].width * (level.platforms[plat.index].len / level.maxPlatLen);\r\n\r\n\t\t\tconst platform: IPlatform = this.gameObject.levels[plat.level].platforms[plat.index] || [];\r\n\r\n\t\t\tif (platform?.decor) {\r\n\t\t\t\tthis.drawDecorForPlat(\r\n\t\t\t\t\tplatform.decor,\r\n\t\t\t\t\tlevel.platforms[plat.index].y,\r\n\t\t\t\t\tplat.x,\r\n\t\t\t\t\tlevel.platforms[plat.index].len\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tif (platform?.obsticles) {\r\n\t\t\t\tthis.drawObsticleOnPlat(platform.obsticles, platform.y, plat.x, platform.len, plat.index);\r\n\t\t\t}\r\n\t\t\tif (platform?.powerUps) {\r\n\t\t\t\tthis.abilities.draw(platform.powerUps, platform.y, plat.x, platform.len, plat.index);\r\n\t\t\t}\r\n\r\n\t\t\tif (level.platformH) {\r\n\t\t\t\tthis.ctx.drawImage(\r\n\t\t\t\t\tthis.images[level.platformTexture],\r\n\t\t\t\t\t0,\r\n\t\t\t\t\t0,\r\n\t\t\t\t\timgW,\r\n\t\t\t\t\tthis.images[level.platformTexture].height,\r\n\t\t\t\t\tplat.x,\r\n\t\t\t\t\tlevel.platforms[plat.index].y,\r\n\t\t\t\t\tlevel.platforms[plat.index].len,\r\n\t\t\t\t\tlevel.platformH\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tthis.ctx.drawImage(\r\n\t\t\t\t\tthis.images[level.platformTexture],\r\n\t\t\t\t\t0,\r\n\t\t\t\t\tthis.images[level.platformTexture].height,\r\n\t\t\t\t\timgW,\r\n\t\t\t\t\t-2.5 *\r\n\t\t\t\t\t\tthis.images[level.platformTexture].height *\r\n\t\t\t\t\t\t((this.world.height - level.platforms[plat.index].y) / this.images[level.platformTexture].height),\r\n\t\t\t\t\tplat.x,\r\n\t\t\t\t\tlevel.platforms[plat.index].y,\r\n\t\t\t\t\tlevel.platforms[plat.index].len,\r\n\t\t\t\t\tthis.world.height - level.platforms[plat.index].y\r\n\t\t\t\t);\r\n\r\n\t\t\t\t// this.ctx.strokeStyle = 'black';\r\n\t\t\t\t// this.ctx.rect(\r\n\t\t\t\t// \tplat.x,\r\n\t\t\t\t// \tlevel.platforms[plat.index].y,\r\n\t\t\t\t// \tlevel.platforms[plat.index].len,\r\n\t\t\t\t// \tthis.world.height - level.platforms[plat.index].y\r\n\t\t\t\t// );\r\n\t\t\t\t// this.ctx.stroke();\r\n\t\t\t}\r\n\r\n\t\t\tconst isColliding = this.collisions.checkForPlatCollision({\r\n\t\t\t\tx1: this.player.x,\r\n\t\t\t\ty1: this.player.y,\r\n\t\t\t\tx2: plat.x,\r\n\t\t\t\ty2: level.platforms[plat.index].y,\r\n\t\t\t\tw1: this.player.w,\r\n\t\t\t\th1: this.player.h,\r\n\t\t\t\tw2: level.platforms[plat.index].len,\r\n\t\t\t\th2: level.platformH || this.world.height - level.platforms[plat.index].y,\r\n\t\t\t\tmargin: this.collisionMargin,\r\n\t\t\t\tobject: `${this.currentLevel}_${plat.index}`,\r\n\t\t\t});\r\n\r\n\t\t\tif (isColliding) isFalling = false;\r\n\r\n\t\t\t// this.ctx.fillStyle = 'rgba(0, 0, 0, 0.3)';\r\n\t\t\t// this.ctx.beginPath();\r\n\t\t\t// this.ctx.rect(this.platforms[i].x, this.platforms[i].y, this.platforms[i].w, this.h);\r\n\t\t\t// this.ctx.fill();\r\n\t\t}\r\n\r\n\t\tif (isFalling) this.player.isInAir = true;\r\n\t}\r\n}\r\n","import Hud from './hud';\r\nimport { Context } from './types';\r\n\r\nexport default class Player {\r\n\tprivate ctx: Context;\r\n\tprivate world: HTMLCanvasElement;\r\n\tprivate hud: Hud;\r\n\tprivate aspectRatio: number;\r\n\tpublic x: number;\r\n\tpublic y: number;\r\n\tpublic w: number;\r\n\tpublic h: number;\r\n\tpublic isInAir: boolean;\r\n\tpublic maxJumpStart: number;\r\n\tpublic jumpVelStartReset: number;\r\n\tpublic jumpVelStart: number;\r\n\tpublic yVelocity: number;\r\n\tpublic yAcc: number;\r\n\tprivate rotation: number;\r\n\tprivate rotationSpeed: number;\r\n\tprivate isJumping: boolean;\r\n\tpublic loadingJump: boolean;\r\n\tprivate wheelRot: number;\r\n\tprivate rotCoordsForJump: { x: number; y: number };\r\n\tpublic speed: number;\r\n\tprivate imagePaths: string[];\r\n\tprivate images: any;\r\n\tprivate isBeingDamaged: boolean;\r\n\tprivate lastObjectHit: string;\r\n\r\n\tconstructor(ctx: Context, world: HTMLCanvasElement, hud: Hud) {\r\n\t\tthis.ctx = ctx;\r\n\t\tthis.world = world;\r\n\t\tthis.aspectRatio = 1.1;\r\n\t\tthis.x = 100;\r\n\t\tthis.y = 100;\r\n\t\tthis.w = 150;\r\n\t\tthis.h = this.w / this.aspectRatio;\r\n\t\tthis.isInAir = true;\r\n\t\tthis.maxJumpStart = 20;\r\n\t\tthis.jumpVelStartReset = 10;\r\n\t\tthis.jumpVelStart = this.jumpVelStartReset;\r\n\t\tthis.yVelocity = 0;\r\n\t\tthis.yAcc = 0.8;\r\n\t\tthis.rotation = 0;\r\n\t\tthis.rotationSpeed = 0;\r\n\t\tthis.isJumping = false;\r\n\t\tthis.loadingJump = false;\r\n\t\tthis.wheelRot = 0;\r\n\t\tthis.rotCoordsForJump = { x: 0, y: 0 };\r\n\t\tthis.speed = 0;\r\n\t\tthis.hud = hud;\r\n\t\tthis.imagePaths = [\r\n\t\t\t'../public/frame.png',\r\n\t\t\t'../public/frameDamaged.png',\r\n\t\t\t'../public/wheel.png',\r\n\t\t\t'../public/wheelDamaged.png',\r\n\t\t];\r\n\t\tthis.images = {};\r\n\t\tthis.isBeingDamaged = false;\r\n\t\tthis.lastObjectHit = '';\r\n\t}\r\n\r\n\tpublic async setUp() {\r\n\t\tconst preloadImages = () => {\r\n\t\t\tconst promises = this.imagePaths.map((path: string) => {\r\n\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\tconst name = path.split('/').pop()?.split('.')[0];\r\n\t\t\t\t\tconst image = new Image();\r\n\r\n\t\t\t\t\timage.src = path;\r\n\t\t\t\t\timage.onload = () => {\r\n\t\t\t\t\t\tresolve([name, image]);\r\n\t\t\t\t\t};\r\n\t\t\t\t\timage.onerror = () => reject(`Image failed to load: ${path}`);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\treturn Promise.all(promises);\r\n\t\t};\r\n\r\n\t\tconst imgArraytemp: any[] = await preloadImages();\r\n\t\tthis.images = Object.fromEntries(imgArraytemp);\r\n\t\tthis.w = this.images.frame.width;\r\n\t\tthis.h = this.images.frame.height;\r\n\t}\r\n\r\n\tpublic changeToDamagedImgs(object: string) {\r\n\t\tif (object === this.lastObjectHit) return;\r\n\t\tthis.lastObjectHit = object;\r\n\t\tthis.isBeingDamaged = true;\r\n\t\tconst flashInterval = 50;\r\n\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.isBeingDamaged = false;\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.isBeingDamaged = true;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.isBeingDamaged = false;\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.isBeingDamaged = true;\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.isBeingDamaged = false;\r\n\t\t\t\t\t\t}, flashInterval);\r\n\t\t\t\t\t}, flashInterval);\r\n\t\t\t\t}, flashInterval);\r\n\t\t\t}, flashInterval);\r\n\t\t}, flashInterval);\r\n\t}\r\n\r\n\tpublic land(y: number) {\r\n\t\tif (this.rotation < 0) return;\r\n\t\tthis.isInAir = false;\r\n\t\tthis.isJumping = false;\r\n\t\tthis.rotationSpeed = 0;\r\n\t\tthis.rotation = 0;\r\n\t\tthis.yVelocity = 0;\r\n\t\tthis.y = y - this.h;\r\n\t\tif (!this.loadingJump) this.jumpVelStart = this.jumpVelStartReset;\r\n\t}\r\n\r\n\tpublic jump() {\r\n\t\tthis.loadingJump = false;\r\n\t\tif (this.isJumping || this.isInAir || this.yVelocity < 0) return;\r\n\t\tthis.rotationSpeed = this.jumpVelStart;\r\n\t\tthis.isJumping = true;\r\n\r\n\t\tthis.isInAir = true;\r\n\t\tthis.yVelocity = this.jumpVelStart;\r\n\t\tthis.jumpVelStart = this.jumpVelStartReset;\r\n\t}\r\n\r\n\tprivate loadJump() {\r\n\t\tif (this.jumpVelStart < this.maxJumpStart) {\r\n\t\t\tthis.jumpVelStart += 0.5;\r\n\t\t\tthis.hud.drawJumpCharge(\r\n\t\t\t\t1 - (this.maxJumpStart - this.jumpVelStart) / (this.maxJumpStart - this.jumpVelStartReset),\r\n\t\t\t\tthis.x,\r\n\t\t\t\tthis.y\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tthis.hud.drawJumpCharge(1, this.x, this.y);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate drawFrame() {\r\n\t\t// const yOffset = 5;\r\n\t\tthis.ctx.save();\r\n\t\tthis.ctx.translate(this.rotCoordsForJump.x, this.rotCoordsForJump.y);\r\n\t\tthis.ctx.rotate((this.rotation * Math.PI) / 180);\r\n\t\tthis.ctx.drawImage(\r\n\t\t\tthis.isBeingDamaged ? this.images.frameDamaged : this.images.frame,\r\n\t\t\t-this.images.wheel.width / 2,\r\n\t\t\t-this.h + this.images.wheel.height / 2,\r\n\t\t\tthis.w,\r\n\t\t\tthis.h\r\n\t\t);\r\n\t\tthis.ctx.restore();\r\n\t}\r\n\r\n\tprivate drawWheels() {\r\n\t\tconst rotOffset = this.hud.health >= 90 ? 0 : this.hud.health < 90 && this.hud.health >= 50 ? 1 : 2;\r\n\r\n\t\tthis.ctx.save();\r\n\t\tthis.ctx.translate(this.rotCoordsForJump.x + rotOffset, this.rotCoordsForJump.y);\r\n\t\tthis.ctx.rotate((this.rotation * Math.PI) / 180); // Rotate for jump\r\n\t\tthis.ctx.rotate((this.wheelRot * Math.PI) / 180); // Rotate for wheel spin\r\n\t\tthis.ctx.drawImage(\r\n\t\t\tthis.isBeingDamaged ? this.images.wheelDamaged : this.images.wheel,\r\n\t\t\t-this.images.wheel.width / 2 - rotOffset,\r\n\t\t\t-this.images.wheel.height / 2,\r\n\t\t\tthis.images.wheel.width - 0.5,\r\n\t\t\tthis.images.wheel.height - 0.5\r\n\t\t);\r\n\t\tthis.ctx.restore();\r\n\r\n\t\tthis.ctx.save();\r\n\t\tthis.ctx.translate(this.rotCoordsForJump.x, this.rotCoordsForJump.y + rotOffset);\r\n\t\tthis.ctx.rotate((this.rotation * Math.PI) / 180); // Rotate for jump\r\n\t\tthis.ctx.translate(-this.rotCoordsForJump.x, -this.rotCoordsForJump.y); // Move to start\r\n\t\tthis.ctx.translate(this.x + this.w - this.images.wheel.width / 2, this.rotCoordsForJump.y);\r\n\t\tthis.ctx.rotate((this.wheelRot * Math.PI) / 180); // Rotate for wheel spin\r\n\t\tthis.ctx.translate(-(this.x + this.w - this.images.wheel.width / 2), -this.rotCoordsForJump.y); // Move to start\r\n\t\tthis.ctx.translate(this.rotCoordsForJump.x, this.rotCoordsForJump.y);\r\n\r\n\t\tthis.ctx.drawImage(\r\n\t\t\tthis.isBeingDamaged ? this.images.wheelDamaged : this.images.wheel,\r\n\t\t\t-(this.rotCoordsForJump.x - this.x) + this.w - this.images.wheel.width,\r\n\t\t\t-this.images.wheel.height / 2 - rotOffset,\r\n\t\t\tthis.images.wheel.width - 0.5,\r\n\t\t\tthis.images.wheel.height - 0.5\r\n\t\t);\r\n\t\tthis.ctx.restore();\r\n\t}\r\n\r\n\tpublic draw() {\r\n\t\tif (!this.images?.frame) return;\r\n\t\tthis.wheelRot += this.speed;\r\n\t\t// this.wheelRot += 10;\r\n\r\n\t\tif (this.loadingJump) this.loadJump();\r\n\r\n\t\tthis.y -= this.yVelocity;\r\n\t\tif (this.isInAir) this.yVelocity -= this.yAcc;\r\n\r\n\t\tif (this.isJumping) {\r\n\t\t\tthis.rotation -= this.rotationSpeed / 4;\r\n\t\t\tthis.rotationSpeed -= this.yAcc * 2;\r\n\r\n\t\t\tif (this.rotation >= 5) {\r\n\t\t\t\tthis.rotationSpeed = 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// this.ctx.fillStyle = 'rgb(0, 0, 0, 0.5)';\r\n\t\t// this.ctx.beginPath();\r\n\t\t// this.ctx.rect(this.x, this.y, this.w, this.h);\r\n\t\t// this.ctx.fill();\r\n\r\n\t\tthis.rotCoordsForJump = {\r\n\t\t\tx: this.x + this.images.wheel.width / 2,\r\n\t\t\ty: this.y + this.h - this.images.wheel.height / 2,\r\n\t\t};\r\n\r\n\t\tthis.drawWheels();\r\n\t\tthis.drawFrame();\r\n\t}\r\n}\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\n__webpack_require__(961);\n__webpack_require__(32);\n__webpack_require__(853);\n__webpack_require__(94);\n__webpack_require__(627);\n__webpack_require__(251);\nvar __webpack_exports__ = __webpack_require__(699);\n"],"names":["ctx","world","hud","collisions","player","this","imagePaths","images","collectedPowerUps","setUp","preloadImages","promises","map","path","Promise","resolve","reject","name","split","pop","image","Image","src","onload","onerror","all","imgArraytemp","Object","fromEntries","activatePowerUp","powerUp","increaseHealth","draw","powerUps","platYTop","platX","platLen","platIndex","i","length","imgSrc","imgX","xPercAlongPlat","imgY","height","distAbovePlat","object","includes","width","shift","drawImage","powerUpCollision","x1","x","y1","y","x2","y2","w1","w","h1","h","w2","h2","margin","push","checkForPlatCollision","playerRightOfPlatLeft","playerLeftOfPlatRight","playerAbovePlatBot","playerBelowPlatTop","isInAir","yVelocity","Math","abs","land","console","log","health","checkForCollision","reduceHealth","changeToDamagedImgs","lastObjectHit","drawingLevelText","levelTextOpacity","levelTextOpacityInc","currentLevel","fps","fpsEnabled","drawFps","font","fillStyle","textAlign","fillText","drawJumpCharge","percentCharged","strokeStyle","beginPath","rect","stroke","fillRect","amt","drawHealth","shadowOffsetX","shadowOffsetY","shadowColor","shadowBlur","lineWidth","roundRect","sectionStartX","sectionStartY","sectionW","sectionH","fill","drawNextLevelText","textBaseline","beginLevelTextAnimation","setTimeout","levels","platforms","len","gapToNext","decor","xLocsOnPlatByPerc","obsticles","platformTexture","platformH","backgroundImg","bgImgYOffset","maxPlatLen","speed","requestId","now","then","elapsed","fpsInterval","document","getElementById","getContext","alpha","startBtn","querySelector","paused","gameLoop","requestAnimationFrame","Date","clearRect","move","cancelAnimationFrame","prepGame","style","display","innerHTML","freeze","addEventListener","e","code","loadingJump","jump","onclick","abilities","gameObject","platsVisible","index","level","backgroundX","backgroundX2","bgImgYOffset2","gameOver","collisionMargin","bgImg1","bgImg2","nextPlatform","lastVisiblePlat","platsRef","lastPlatRef","platRef","drawDecorForPlat","decorXVals","drawObsticleOnPlat","obsticleXVals","drawBgImage","bgImage1","bgImage2","isFalling","plat","imgW","platform","aspectRatio","maxJumpStart","jumpVelStartReset","jumpVelStart","yAcc","rotation","rotationSpeed","isJumping","wheelRot","rotCoordsForJump","isBeingDamaged","frame","loadJump","drawFrame","save","translate","rotate","PI","frameDamaged","wheel","restore","drawWheels","rotOffset","wheelDamaged","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","d","definition","key","o","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call"],"sourceRoot":""}